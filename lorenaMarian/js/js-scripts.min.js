"use strict";var html=document.querySelector("html"),body=document.querySelector("body"),animationSpeed=400,pageTitle=document.querySelector(".page-title"),bodyLoadingClass="is-loading",menuSelector=".nav",menuActiveClass="active",menuActiveParentClass="active",barbaContainer=document.querySelector('[data-barba="container"]'),defaultColour=barbaContainer.getAttribute("data-colour"),defaultTitle=barbaContainer.getAttribute("data-title"),autoscrolling=!0;function eventPreventDefault(e){e.preventDefault()}body.style.backgroundColor=defaultColour,document.addEventListener("DOMContentLoaded",function(){if(barbaContainer){barba.use(barbaCss),barba.init({transitions:[{beforeLeave:function(e){body.classList.add(bodyLoadingClass)},beforeEnter:function(e){window.scrollTo(0,0),body.classList.remove("is--"+e.current.namespace),body.classList.add("is--"+e.next.namespace),body.classList.remove("has-info-panel"),body.classList.remove("has-project-info-panel"),body.classList.remove("has-thumb-hovered");var o=e.next.container.getAttribute("data-title");pageTitle.innerHTML=o,window.defaultTitle=o;var n=e.next.container.getAttribute("data-colour");body.style.backgroundColor=n,window.defaultColour=n,"home"===e.next.namespace&&(t=!0)},afterEnter:function(e){body.classList.remove(bodyLoadingClass),c(),"function"==typeof ga&&ga("send","pageview",e.next.url.path)}}]});var e=60,t=!0;d(),function(){var e=document.querySelectorAll("[data-video-loader]");function t(e){var t,o=e.target,n=o.getAttribute("data-video-id"),a=o.getAttribute("data-video-src"),i=o.parentNode;"youtube"==a?t="https://www.youtube.com/embed/".concat(n,"?&theme=dark&color=white&autoplay=1&autohide=1&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3"):"vimeo"==a&&(t="https://player.vimeo.com/video/".concat(n,"?autoplay=1&loop=1&title=0&byline=0&portrait=0"));var r='<iframe width="100%" height="100%" src="'.concat(t,'" frameborder="0" allowfullscreen></iframe>');i.insertAdjacentHTML("beforeend",r)}e&&e.forEach(function(e){e.addEventListener("click",t)})}(),o(),a(),c()}function o(){function e(e){e.preventDefault(),body.classList.toggle("has-info-panel")}document.querySelectorAll("[data-info-toggle]").forEach(function(t){t.addEventListener("click",e,!1)}),document.addEventListener("keyup",function(e){"Escape"==e.key&&body.classList.remove("has-info-panel")},!1)}function n(){var e=document.querySelectorAll("[data-project-info-toggle]"),t=document.querySelector(".project-info-toggle");function o(e){e.preventDefault(),body.classList.toggle("has-project-info-panel"),body.classList.contains("has-project-info-panel")?t.innerHTML="Hide Info":t.innerHTML="Show Info"}e.forEach(function(e){e.addEventListener("click",o,!1)}),document.addEventListener("keyup",function(e){"Escape"==e.key&&body.classList.remove("has-project-info-panel")},!1)}function a(){setTimeout(function(){requestAnimationFrame(a),t&&window.scrollBy(0,1)},1e3/e)}function i(){var e=document.querySelector(".loop__content");if(e){var t=e.clientHeight,o=document.querySelector(".loop__content.is-clone"),n=(e.parentElement,0);window.addEventListener("scroll",function(a){body.getBoundingClientRect().top>n?0==Math.round(e.getBoundingClientRect().top)&&window.scroll({top:o.getBoundingClientRect().top}):Math.round(o.getBoundingClientRect().bottom)==window.innerHeight&&window.scroll({top:t-window.innerHeight}),n=document.body.getBoundingClientRect().top})}}function r(e){var o,n=(o="A"!==e.target.tagName?e.target.parentNode:e.target).getAttribute("data-colour");body.style.backgroundColor=n,body.classList.add("has-thumb-hovered");var a=o.getAttribute("data-title");pageTitle.innerHTML=a,t=!1}function l(e){body.classList.contains("is-loading")||(body.style.backgroundColor=defaultColour,pageTitle.innerHTML=defaultTitle),body.classList.remove("has-thumb-hovered"),t=!0}function d(){new SmoothScroll('a[href*="#"]:not([href="#"])',{speed:animationSpeed,speedAsDuration:!0})}function c(){var e;d(),function(){var e=document.querySelectorAll(".project-thumb, .site-tagline, .index-link");e&&e.forEach(function(e){e.addEventListener("mouseenter",r,!1),e.addEventListener("click",r,!1),e.addEventListener("mouseleave",l,!1)})}(),n(),(e=document.querySelectorAll(".flickity"))&&e.forEach(function(e){var t=new Flickity(e,{autoPlay:2e3,pauseAutoPlayOnHover:!1,draggable:">1",lazyLoad:3,prevNextButtons:!1,pageDots:!1,resize:!0,setGallerySize:!1,wrapAround:!0,imagesLoaded:!0}),o=document.querySelector(".slider-index");if(o){var n=Flickity.data(e);t.on("select",function(){o.innerHTML=n.selectedIndex+1+"/"+n.slides.length})}t.on("staticClick",function(){t.next()})}),function(){var e=document.querySelectorAll('#wpadminbar a, a[href^="#"], a[href^="mailto"], a[href^="tel"], a[target="_blank"], .has-children > a, a[data-info-toggle]');if(e){e.forEach(function(e){e.setAttribute("data-barba-prevent","self")});var t=document.querySelector("#wpadminbar");t&&t.setAttribute("data-barba-prevent","all")}}(),imagesLoaded(body,i)}});